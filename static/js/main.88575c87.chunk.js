(this["webpackJsonpblogging-platform"]=this["webpackJsonpblogging-platform"]||[]).push([[0],{147:function(e,a,t){e.exports=t(223)},174:function(e,a,t){},175:function(e,a,t){},222:function(e,a,t){},223:function(e,a,t){"use strict";t.r(a);var n,r=t(0),i=t.n(r),o=t(4),l=t.n(o),s=t(22),c=t(7),u=t(19),m=t(35),p=t(130),g=t(70),d=t(256),f=t(49),b=t.n(f),h=t(91),E=t(257),v=t(92),w=t.n(v),S="https://conduit.productionready.io/api/",_=function(e){var a="".concat(S,"users");return w.a.post(a,e)},j=function(e){var a="".concat(S,"users/login");return w.a.post(a,e)},O=function(e){var a="".concat(S,"user");return w.a.get(a,e)},x=function(){var e=localStorage.getItem("token"),a=null;return e&&(a={headers:{Authorization:"Token ".concat(e)}}),a},y=function(){localStorage.clear()},N=function(){return null===x()?"noutAutorization":"autorization"},T=Object(E.a)("STATUS_LOGIN_SUCCESS"),A=Object(E.a)("STATUS_LOGIN_REQUEST"),C=Object(E.a)("STATUS_LOGIN_FAILURE"),U=Object(E.a)("LOGIN_DATA"),L=Object(E.a)("STATUS_SIGNUP_SUCCESS"),k=Object(E.a)("STATUS_SIGNUP_REQUEST"),z=(Object(E.a)("STATUS_SIGNUP_FAILURE"),function(e){return function(){var a=Object(h.a)(b.a.mark((function a(t){var n;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O(x());case 3:n=a.sent,t(T()),t(U(n.data)),e.push("/blogging-platform/houme"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),e.push("/blogging-platform/signup");case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}),B=function(e,a,t){return function(){var n=Object(h.a)(b.a.mark((function n(r){var i,o,l,s,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.email,o=e.password,l={user:{email:i,password:o}},r(k()),n.prev=3,n.next=6,j(l);case 6:s=n.sent,c=s.data.user.token,localStorage.setItem("token","".concat(c)),r(z(t)),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(3),n.t0.response.data.errors&&a("password","\u041f\u043e\u0447\u0442\u0430 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b"),n.t0.response.data.errors&&a("email","\u041f\u043e\u0447\u0442\u0430 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b");case 16:case"end":return n.stop()}}),n,null,[[3,12]])})));return function(e){return n.apply(this,arguments)}}()},I=Object(d.a)(Object(g.a)({},U,(function(e,a){return a.payload.user})),{}),F=Object(d.a)((n={},Object(g.a)(n,T,(function(){return!0})),Object(g.a)(n,C,(function(){return!1})),n),!1),q=Object(d.a)(Object(g.a)({},L,(function(e,a){return a.payload})),!1),D=Object(m.c)({isSignUp:q,isLogin:F,loginData:I}),G=(t(172),t(173),t(174),t(175),t(255)),R=function(e){return e.isLogin},W=function(e){return e.isSignUp},Z=function(e){return e.loginData},P={setLoginFailure:C},J=Object(u.b)((function(e){return{isLogin:R(e)}}),P)((function(e){var a=e.setLoginFailure,t=e.history,n=function(){a(),y()},r={bloggingplatformlogin:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",bloggingplatformsignup:"\u0412\u0445\u043e\u0434",bloggingplatformhoume:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},o={bloggingplatformlogin:"/blogging-platform/signup",bloggingplatformsignup:"/blogging-platform/login",bloggingplatformhoume:"/blogging-platform/login",bloggingplatform:"/blogging-platform/login"};return i.a.createElement("div",{className:"header"},"autorization"===N?i.a.createElement(i.a.Fragment,null,i.a.createElement(G.a,{className:"header__btn",onClick:n},i.a.createElement(s.b,{to:"/blogging-platform/signup"},"\u0412\u044b\u0445\u043e\u0434"))):function(){var e=t.location.pathname.replace(/[/,-]/g,"");return i.a.createElement(i.a.Fragment,null,i.a.createElement(G.a,{className:"header__btn"},i.a.createElement(s.b,{to:o[e]},r[e])))}())})),Q=t(25),V=t(254),H=t(251),K=t(40),M=K.a().shape({username:K.b().max(50,"\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0438\u043c\u044f").min(2,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0438\u043c\u044f").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:K.b().min(8,"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(40,"\u041d\u0443 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043a\u043e\u0440\u043e\u0447\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0435\u0442\u0435?").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").matches(/(?=.*[0-9])(?=.*[A-Z])[a-z0-9A-Z]/,"\u0431\u0443\u043a\u0432\u044b \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430 \u0438 \u0446\u0438\u0444\u0440\u044b, \u043e\u0442 8 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430"),email:K.b().email("\u0412\u0432\u043e\u0434\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u0435\u043d").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),X=K.a().shape({email:K.b().email("\u0412\u0432\u043e\u0434\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u0435\u043d").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:K.b().min(8,"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(40,"\u041d\u0443 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043a\u043e\u0440\u043e\u0447\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0435\u0442\u0435?").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").matches(/(?=.*[0-9])(?=.*[A-Z])[a-z0-9A-Z]/,"\u0431\u0443\u043a\u0432\u044b \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430 \u0438 \u0446\u0438\u0444\u0440\u044b, \u043e\u0442 8 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430")}),Y=Object(H.a)((function(e){return{wrapper__registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{textTransform:"uppercase",textAlign:"center",margin:0,marginTop:e.spacing(1),"@media(maxWidth: 1200px)":{fontSize:18}},registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignContent:"center",padding:e.spacing(2),width:350},registration__data:{marginBottom:e.spacing(2)}}})),$={setRegistrations:function(e,a,t){return function(){var n=Object(h.a)(b.a.mark((function n(r){var i,o,l,s,c,u,m;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.username,o=e.email,l=e.password,s={user:{username:i,email:o,password:l}},r(A()),n.prev=3,n.next=6,_(s);case 6:200===n.sent.status&&(r(T(!0)),r(B(e,a,t))),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(3),c=n.t0.response.data.errors,u=c.username,m=c.email,u&&a("username","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"),m&&a("email","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d");case 15:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}()}},ee=Object(u.b)((function(e){return{isLogin:R(e),isSignUp:W(e)}}),$)((function(e){var a=e.setRegistrations,t=e.history,n=Y();return i.a.createElement("div",{className:n.wrapper__registration},i.a.createElement("h1",{className:n.title},"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),i.a.createElement(Q.c,{initialValues:{username:"",email:"",password:""},validationSchema:M,onSubmit:function(e,n){var r=n.setFieldError;a(e,r,t)}},(function(e){var a=e.touched,t=e.errors,r=e.handleSubmit,o=e.handleBlur,l=e.handleChange,s=e.values;return i.a.createElement(Q.b,{className:n.registration,onSubmit:r},i.a.createElement(Q.a,{size:"small",name:"username",className:n.registration__data,as:"input",component:V.a,label:"\u0418\u043c\u044f",variant:"outlined",onChange:l("username"),error:a.username&&Boolean(t.username),helperText:a.username&&t.username,onBlur:o("username"),required:!0,value:s.username}),i.a.createElement(Q.a,{size:"small",name:"email",className:n.registration__data,as:"input",component:V.a,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",onChange:l("email"),error:a.email&&Boolean(t.email),helperText:a.email&&t.email,onBlur:o("email"),required:!0,value:s.email}),i.a.createElement(Q.a,{size:"small",name:"password",className:n.registration__data,component:V.a,label:"\u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",onChange:l("password"),type:"password",error:a.password&&Boolean(t.password),helperText:a.password&&t.password,onBlur:o("password"),autoComplete:"current-password",fullWidth:!0,required:!0,value:s.password}),i.a.createElement(G.a,{htmlType:"submit",type:"primary",disabled:Object.keys(t).length>0?"disabled":null},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))})),i.a.createElement(s.b,{to:"/blogging-platform/login"},"\u0412\u043e\u0439\u0442\u0438"))})),ae=Object(H.a)((function(e){return{wrapper__registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{textTransform:"uppercase",textAlign:"center",margin:0,marginTop:e.spacing(1),"@media(maxWidth: 1200px)":{fontSize:18}},registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignContent:"center",padding:e.spacing(2),width:350},registration__data:{marginBottom:e.spacing(2)}}})),te={setAutorizations:B},ne=Object(u.b)((function(e){return{isLogin:R(e),isSignUp:W(e)}}),te)((function(e){var a=e.setAutorizations,t=e.history,n=ae();return i.a.createElement("div",{className:n.wrapper__registration},i.a.createElement("h1",{className:n.title},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),i.a.createElement(Q.c,{initialValues:{email:"",password:""},validationSchema:X,onSubmit:function(e,n){var r=n.setFieldError;a(e,r,t)}},(function(e){var a=e.touched,t=e.errors,r=e.handleSubmit,o=e.handleBlur,l=e.handleChange,s=e.values;return i.a.createElement(Q.b,{className:n.registration,onSubmit:r},i.a.createElement(Q.a,{size:"small",name:"email",className:n.registration__data,as:"input",component:V.a,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",onChange:l("email"),error:a.email&&Boolean(t.email),helperText:a.email&&t.email,onBlur:o("email"),required:!0,value:s.email}),i.a.createElement(Q.a,{size:"small",name:"password",className:n.registration__data,component:V.a,label:"\u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",onChange:l("password"),type:"password",error:a.password&&Boolean(t.password),helperText:a.password&&t.password,onBlur:o("password"),autoComplete:"current-password",fullWidth:!0,required:!0,value:s.password}),i.a.createElement(G.a,{htmlType:"submit",type:"primary",disabled:Object.keys(t).length>0?"disabled":null},"\u0412\u0445\u043e\u0434"))})),i.a.createElement(s.b,{to:"/blogging-platform/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))})),re=(t(222),{setLoginFailure:C}),ie=Object(u.b)((function(e){return{loginData:Z(e)}}),re)((function(e){var a=e.loginData.username,t=e.setLoginFailure;return i.a.createElement("div",{className:"wrapper__houme"},i.a.createElement("h1",{className:"title"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),i.a.createElement("span",{className:"name"},a),i.a.createElement(G.a,{className:"houme__btn",onClick:function(){t(),y()}},i.a.createElement(s.b,{to:"/blogging-platform/login"},"\u0412\u044b\u0445\u043e\u0434")))})),oe={getAutorizations:z,setLoginSuccess:T},le=Object(u.b)((function(e){return{isLogin:R(e),isSignUp:W(e),loginData:Z(e)}}),oe)((function(e){var a=e.isLogin,t=e.history,n=e.getAutorizations,o=e.setLoginSuccess;return Object(r.useEffect)((function(){localStorage.getItem("token")?(n(t),o()):t.push("/blogging-platform/signup")}),[a]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"container"},i.a.createElement(c.a,{path:"/blogging-platform",component:J}),i.a.createElement("div",{className:"sitebar"},i.a.createElement(c.a,{path:"/blogging-platform/houme",component:ie}),i.a.createElement(c.a,{path:"/blogging-platform/login",component:ne}),i.a.createElement(c.a,{path:"/blogging-platform/signup",component:ee}))))})),se=Object(m.e)(D,Object(m.d)(Object(m.a)(p.a))),ce=function(){return i.a.createElement(u.a,{store:se},i.a.createElement(s.a,null,i.a.createElement(c.a,{component:le})))};l.a.render(i.a.createElement(ce,null),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.88575c87.chunk.js.map