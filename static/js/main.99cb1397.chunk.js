(this["webpackJsonpblogging-platform"]=this["webpackJsonpblogging-platform"]||[]).push([[0],{147:function(e,t,a){e.exports=a(223)},174:function(e,t,a){},175:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){"use strict";a.r(t);var n,r,i=a(0),o=a.n(i),s=a(4),c=a.n(s),l=a(19),u=a(7),m=a(21),p=a(37),g=a(130),d=a(16),b=a(256),f=a(50),E=a.n(f),h=a(91),_=a(258),S=a(92),v=a.n(S),O="https://conduit.productionready.io/api/",j=function(e){var t={user:{username:e.username,email:e.email,password:e.password}},a="".concat(O,"users");return v.a.post(a,t)},w=function(e){var t={user:{email:e.email,password:e.password}},a="".concat(O,"users/login");return v.a.post(a,t)},x=function(e){var t={headers:{Authorization:"Token ".concat(e)}},a="".concat(O,"user");return v.a.get(a,t)},N=function(){localStorage.clear()},T=Object(_.a)("STATUS_SIGNUP_REQUEST"),U=Object(_.a)("STATUS_SIGNUP_SUCCESS"),A=Object(_.a)("STATUS_SIGNUP_FAILURE"),C=Object(_.a)("STATUS_LOGIN_REQUEST"),y=Object(_.a)("STATUS_LOGIN_SUCCESS"),L=Object(_.a)("STATUS_LOGIN_FAILURE"),k=Object(_.a)("STATUS_USER_REQUEST"),I=Object(_.a)("STATUS_USER_SUCCESS"),q=Object(_.a)("STATUS_USER_FAILURE"),R=Object(_.a)("LOGIN_DATA"),B=Object(_.a)("LOGIN_EXIT"),z=(Object(_.a)("REQUEST_DATA"),Object(b.a)(Object(d.a)({},R,(function(e,t){return t.payload.user.username})),"")),G=Object(b.a)((n={},Object(d.a)(n,y,(function(){return!0})),Object(d.a)(n,U,(function(){return!0})),Object(d.a)(n,I,(function(){return!0})),Object(d.a)(n,L,(function(){return!1})),Object(d.a)(n,A,(function(){return!1})),Object(d.a)(n,q,(function(){return!1})),Object(d.a)(n,B,(function(){return!1})),n),!1),D=Object(b.a)((r={},Object(d.a)(r,C,(function(){return!0})),Object(d.a)(r,T,(function(){return!0})),Object(d.a)(r,I,(function(){return!1})),Object(d.a)(r,L,(function(){return!1})),Object(d.a)(r,A,(function(){return!1})),Object(d.a)(r,q,(function(){return!1})),r),!1),F=Object(p.c)({isLogin:G,username:z,isRequest:D}),Q=(a(172),a(173),a(174),a(175),a(255)),V=function(e){return e.isLogin},W=function(e){return e.username},P=function(e){return e.isRequest},J={setLoginExit:B},Z=Object(m.b)((function(e){return{isLogin:V(e)}}),J)((function(e){var t=e.setLoginExit,a=function(){t(),N()};return o.a.createElement("div",{className:"header"},o.a.createElement(u.c,null,o.a.createElement(u.a,{path:"/blogging-platform/signup",component:function(){return o.a.createElement(Q.a,{className:"header__btn",onClick:a},o.a.createElement(l.b,{to:"/blogging-platform/login"},"\u0412\u043e\u0439\u0442\u0438"))}}),o.a.createElement(u.a,{path:"/blogging-platform/login",component:function(){return o.a.createElement(Q.a,{className:"header__btn",onClick:a},o.a.createElement(l.b,{to:"/blogging-platform/signup"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))}}),o.a.createElement(u.a,{path:"/blogging-platform/home",component:function(){return o.a.createElement(Q.a,{className:"header__btn",onClick:a},o.a.createElement(l.b,{to:"/blogging-platform/signup"},"\u0412\u044b\u0445\u043e\u0434"))}})))})),X=a(26),H=a(254),K=a(251),M=a(31),Y=M.a().shape({username:M.b().max(50,"\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0438\u043c\u044f").min(2,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0438\u043c\u044f").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:M.b().min(8,"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(40,"\u041d\u0443 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043a\u043e\u0440\u043e\u0447\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0435\u0442\u0435?").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").matches(/(?=.*[0-9])(?=.*[A-Z])[a-z0-9A-Z]/,"\u0431\u0443\u043a\u0432\u044b \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430 \u0438 \u0446\u0438\u0444\u0440\u044b, \u043e\u0442 8 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430"),email:M.b().email("\u0412\u0432\u043e\u0434\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u0435\u043d").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),$=Object(K.a)((function(e){return{wrapper__registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{textTransform:"uppercase",textAlign:"center",margin:0,marginTop:e.spacing(1),"@media(maxWidth: 1200px)":{fontSize:18}},registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignContent:"center",padding:e.spacing(2),width:350},registration__data:{marginBottom:e.spacing(2)},error__internet:{textAlign:"center",color:"red"}}})),ee={registration:function(e,t){return function(){var a=Object(h.a)(E.a.mark((function a(n){var r,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(C()),a.prev=1,a.next=4,j(e);case 4:200===(r=a.sent).status&&(n(y()),i=r.data.user.token,localStorage.setItem("token","".concat(i))),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n(L()),void 0===a.t0.response&&a.t0.isAxiosError?t("errorName","\u041d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443"):(t("username","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"),t("email","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"));case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}},te=Object(m.b)((function(e){return{isLogin:V(e),isRequest:P(e)}}),ee)((function(e){var t=e.registration,a=e.isRequest,n=$();return o.a.createElement("div",{className:n.wrapper__registration},o.a.createElement("h1",{className:n.title},"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),o.a.createElement(X.c,{initialValues:{username:"",email:"",password:""},validationSchema:Y,onSubmit:function(e,a){var n=a.setFieldError;t(e,n)}},(function(e){var t=e.touched,r=e.errors,i=e.handleSubmit,s=e.handleBlur,c=e.handleChange,l=e.values,u=e.dirty,m=e.isValid;return o.a.createElement(X.b,{className:n.registration,onSubmit:i},o.a.createElement(X.a,{size:"small",name:"username",className:n.registration__data,as:"input",component:H.a,label:"\u0418\u043c\u044f",variant:"outlined",onChange:c("username"),error:t.username&&Boolean(r.username),helperText:t.username&&r.username,onBlur:s("username"),required:!0,value:l.username,disabled:a}),o.a.createElement(X.a,{size:"small",name:"email",className:n.registration__data,as:"input",component:H.a,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",onChange:c("email"),error:t.email&&Boolean(r.email),helperText:t.email&&r.email,onBlur:s("email"),required:!0,value:l.email,disabled:a}),o.a.createElement(X.a,{size:"small",name:"password",className:n.registration__data,component:H.a,label:"\u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",onChange:c("password"),type:"password",error:t.password&&Boolean(r.password),helperText:t.password&&r.password,onBlur:s("password"),autoComplete:"current-password",fullWidth:!0,required:!0,value:l.password,disabled:a}),o.a.createElement(Q.a,{htmlType:"submit",type:"primary",disabled:!m||!u||a},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.errorName&&o.a.createElement("span",{className:n.error__internet},r.errorName))})),o.a.createElement(l.b,{to:"/blogging-platform/login"},"\u0412\u043e\u0439\u0442\u0438"))})),ae=M.a().shape({password:M.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),email:M.b().email("\u0412\u0432\u043e\u0434\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u0435\u043d").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),ne=Object(K.a)((function(e){return{wrapper__registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{textTransform:"uppercase",textAlign:"center",margin:0,marginTop:e.spacing(1),"@media(maxWidth: 1200px)":{fontSize:18}},registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignContent:"center",padding:e.spacing(2),width:350},registration__data:{marginBottom:e.spacing(2)},error__internet:{textAlign:"center",color:"red"}}})),re={authorization:function(e,t){return function(){var a=Object(h.a)(E.a.mark((function a(n){var r,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(T()),a.prev=1,a.next=4,w(e);case 4:r=a.sent,n(U()),i=r.data.user.token,localStorage.setItem("token","".concat(i)),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),n(A()),void 0===a.t0.response&&a.t0.isAxiosError?t("errorName","\u041d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443"):(t("password","\u041f\u043e\u0447\u0442\u0430 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b"),t("email","\u041f\u043e\u0447\u0442\u0430 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b"));case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()}},ie=Object(m.b)((function(e){return{isLogin:V(e),isRequest:P(e)}}),re)((function(e){var t=e.authorization,a=e.isRequest,n=ne();return o.a.createElement("div",{className:n.wrapper__registration},o.a.createElement("h1",{className:n.title},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),o.a.createElement(X.c,{initialValues:{email:"",password:""},validationSchema:ae,onSubmit:function(e,a){var n=a.setFieldError;t(e,n)}},(function(e){var t=e.touched,r=e.errors,i=e.handleSubmit,s=e.handleBlur,c=e.handleChange,l=e.values,u=e.isValid,m=e.dirty;return o.a.createElement(X.b,{className:n.registration,onSubmit:i},o.a.createElement(X.a,{size:"small",name:"email",className:n.registration__data,as:"input",component:H.a,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",onChange:c("email"),error:t.email&&Boolean(r.email),helperText:t.email&&r.email,onBlur:s("email"),required:!0,value:l.email,disabled:a}),o.a.createElement(X.a,{size:"small",name:"password",className:n.registration__data,component:H.a,label:"\u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",onChange:c("password"),type:"password",error:t.password&&Boolean(r.password),helperText:t.password&&r.password,onBlur:s("password"),autoComplete:"current-password",fullWidth:!0,required:!0,value:l.password,disabled:a}),o.a.createElement(Q.a,{htmlType:"submit",type:"primary",disabled:!u||!m||a},"\u0412\u0445\u043e\u0434"),r.errorName&&o.a.createElement("span",{className:n.error__internet},r.errorName))})),o.a.createElement(l.b,{to:"/blogging-platform/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))})),oe=(a(222),{setLoginExit:B}),se=Object(m.b)((function(e){return{username:W(e)}}),oe)((function(e){var t=e.username,a=e.setLoginExit;return o.a.createElement("div",{className:"wrapper__houme"},o.a.createElement("h1",{className:"title"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),o.a.createElement("span",{className:"name"},t),o.a.createElement(Q.a,{className:"houme__btn",onClick:function(){a(),N()}},o.a.createElement(l.b,{to:"/blogging-platform/login"},"\u0412\u044b\u0445\u043e\u0434")))})),ce={getUser:function(e){return function(){var t=Object(h.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(k()),t.prev=1,t.next=4,x(localStorage.getItem("token"));case 4:n=t.sent,a(I()),a(R(n.data)),e.push("/blogging-platform/home"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),a(q()),e.push("/blogging-platform/signup");case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},setLoginSuccess:y},le=Object(m.b)((function(e){return{isLogin:V(e)}}),ce)((function(e){var t=e.isLogin,a=e.getUser,n=e.setLoginSuccess,r=Object(u.f)();return Object(i.useEffect)((function(){localStorage.getItem("token")?(a(r),n()):r.push("/blogging-platform/signup")}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container"},o.a.createElement(u.a,{path:"/blogging-platform",component:Z}),o.a.createElement("div",{className:"sitebar"},o.a.createElement(u.a,{path:"/blogging-platform/home",component:se}),o.a.createElement(u.a,{path:"/blogging-platform/login",component:ie}),o.a.createElement(u.a,{path:"/blogging-platform/signup",component:te}))))})),ue=Object(p.e)(F,Object(p.d)(Object(p.a)(g.a))),me=function(){return o.a.createElement(m.a,{store:ue},o.a.createElement(l.a,null,o.a.createElement(u.a,{component:le})))};c.a.render(o.a.createElement(me,null),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.99cb1397.chunk.js.map