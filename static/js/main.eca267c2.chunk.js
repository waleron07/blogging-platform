(this["webpackJsonpblogging-platform"]=this["webpackJsonpblogging-platform"]||[]).push([[0],{147:function(e,t,a){e.exports=a(226)},174:function(e,t,a){},175:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),i=a.n(o),c=a(20),s=a(7),l=a(17),u=a(38),m=a(130),p=a(16),g=a(259),d=a(21),f=a.n(d),b=a(39),h=a(261),E=a(92),v=a.n(E),_=function(){return localStorage.getItem("token")},S=function(){localStorage.clear()},O=function(e){localStorage.setItem("token","".concat(e))},j="https://conduit.productionready.io/api/",w=v.a.create();w.interceptors.request.use((function(e){var t=e;return t.headers.Authorization="Token ".concat(_()),t}));var x,N,T=function(){var e="".concat(j,"user");return w.get(e)},A=function(e){var t={user:{username:e.username,email:e.email,password:e.password}},a="".concat(j,"users");return v.a.post(a,t)},k=function(e){var t={user:{email:e.email,password:e.password}},a="".concat(j,"users/login");return v.a.post(a,t)},U=Object(h.a)("STATUS_SIGNUP_REQUEST"),y=Object(h.a)("STATUS_SIGNUP_SUCCESS"),C=Object(h.a)("STATUS_SIGNUP_FAILURE"),B=Object(h.a)("STATUS_LOGIN_REQUEST"),I=Object(h.a)("STATUS_LOGIN_SUCCESS"),L=Object(h.a)("STATUS_LOGIN_FAILURE"),q=Object(h.a)("STATUS_USER_REQUEST"),z=Object(h.a)("STATUS_USER_SUCCESS"),F=Object(h.a)("STATUS_USER_FAILURE"),R=Object(h.a)("LOGIN_DATA"),G=Object(h.a)("LOGIN_EXIT"),D=(Object(h.a)("REQUEST_DATA"),function(e){return function(){var t=Object(b.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(q()),t.prev=1,t.next=4,T();case 4:n=t.sent,a(z()),a(R(n.data)),e.push("/blogging-platform/home"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),a(F()),e.push("/blogging-platform/signup");case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}),Q=Object(g.a)(Object(p.a)({},R,(function(e,t){return t.payload.user.username})),""),V=Object(g.a)((x={},Object(p.a)(x,I,(function(){return!0})),Object(p.a)(x,y,(function(){return!0})),Object(p.a)(x,z,(function(){return!0})),Object(p.a)(x,L,(function(){return!1})),Object(p.a)(x,C,(function(){return!1})),Object(p.a)(x,F,(function(){return!1})),Object(p.a)(x,G,(function(){return!1})),x),!1),W=Object(g.a)((N={},Object(p.a)(N,B,(function(){return!0})),Object(p.a)(N,U,(function(){return!0})),Object(p.a)(N,z,(function(){return!1})),Object(p.a)(N,L,(function(){return!1})),Object(p.a)(N,C,(function(){return!1})),Object(p.a)(N,F,(function(){return!1})),N),!1),P=Object(u.c)({isAuth:V,username:Q,isBlockingForm:W}),J=(a(172),a(173),a(174),a(175),a(258)),Z=function(e){return e.isAuth},X=function(e){return e.username},H=function(e){return e.isBlockingForm},K={setLoginExit:G},M=Object(l.b)((function(e){return{isAuth:Z(e)}}),K)((function(e){var t=e.setLoginExit,a=function(){t(),S()};return r.a.createElement("div",{className:"header"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/blogging-platform/signup",component:function(){return r.a.createElement(J.a,{className:"header__btn",onClick:a},r.a.createElement(c.b,{to:"/blogging-platform/login"},"\u0412\u043e\u0439\u0442\u0438"))}}),r.a.createElement(s.a,{path:"/blogging-platform/login",component:function(){return r.a.createElement(J.a,{className:"header__btn",onClick:a},r.a.createElement(c.b,{to:"/blogging-platform/signup"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))}}),r.a.createElement(s.a,{path:"/blogging-platform/home",component:function(){return r.a.createElement(J.a,{className:"header__btn",onClick:a},r.a.createElement(c.b,{to:"/blogging-platform/signup"},"\u0412\u044b\u0445\u043e\u0434"))}})))})),Y=a(27),$=a(257),ee=(a(222),a(254)),te=a(32),ae=te.a().shape({username:te.b().max(50,"\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0438\u043c\u044f").min(2,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0438\u043c\u044f").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:te.b().min(8,"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(40,"\u041d\u0443 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043a\u043e\u0440\u043e\u0447\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0435\u0442\u0435?").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").matches(/(?=.*[0-9])(?=.*[A-Z])[a-z0-9A-Z]/,"\u0431\u0443\u043a\u0432\u044b \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430 \u0438 \u0446\u0438\u0444\u0440\u044b, \u043e\u0442 8 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430"),email:te.b().email("\u0412\u0432\u043e\u0434\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u0435\u043d").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),ne=Object(ee.a)((function(e){return{wrapper__registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{textTransform:"uppercase",textAlign:"center",margin:0,marginTop:e.spacing(1),"@media(maxWidth: 1200px)":{fontSize:18}},registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignContent:"center",padding:e.spacing(2),width:350},registration__data:{marginBottom:e.spacing(2)},error__internet:{textAlign:"center",color:"red"}}})),re={registration:function(e){return function(){var t=Object(b.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(B()),t.prev=1,t.next=4,A(e);case 4:200===(n=t.sent).status&&(r=n.data.user.token,localStorage.setItem("token","".concat(r)),a(I())),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),a(L()),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},oe=Object(l.b)((function(e){return{isBlockingForm:H(e)}}),re)((function(e){var t=e.registration,a=e.isBlockingForm,n=ne(),o=function(){var e=Object(b.a)(f.a.mark((function e(a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setFieldError,e.prev=1,e.next=4,t(a,r);case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),void 0===e.t0.response&&e.t0.isAxiosError&&r("errorName","\u041d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443"),e.t0.response.data.errors.username&&r("username","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"),e.t0.response.data.errors.email&&r("email","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d");case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:n.wrapper__registration},r.a.createElement("h1",{className:n.title},"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement(Y.c,{initialValues:{username:"",email:"",password:""},validationSchema:ae,onSubmit:o},(function(e){var t=e.touched,o=e.errors,i=e.handleSubmit,c=e.handleBlur,s=e.handleChange,l=e.values,u=e.dirty,m=e.isValid;return r.a.createElement(Y.b,{className:n.registration,onSubmit:i},r.a.createElement(Y.a,{size:"small",name:"username",className:n.registration__data,as:"input",component:$.a,label:"\u0418\u043c\u044f",variant:"outlined",onChange:s("username"),error:t.username&&Boolean(o.username),helperText:t.username&&o.username,onBlur:c("username"),required:!0,value:l.username,disabled:a}),r.a.createElement(Y.a,{size:"small",name:"email",className:n.registration__data,as:"input",component:$.a,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",onChange:s("email"),error:t.email&&Boolean(o.email),helperText:t.email&&o.email,onBlur:c("email"),required:!0,value:l.email,disabled:a}),r.a.createElement(Y.a,{size:"small",name:"password",className:n.registration__data,component:$.a,label:"\u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",onChange:s("password"),type:"password",error:t.password&&Boolean(o.password),helperText:t.password&&o.password,onBlur:c("password"),autoComplete:"current-password",fullWidth:!0,required:!0,value:l.password,disabled:a}),r.a.createElement(J.a,{htmlType:"submit",type:"primary",disabled:!m||!u||a},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),o.errorName&&r.a.createElement("span",{className:n.error__internet},o.errorName))})),r.a.createElement(c.b,{to:"/blogging-platform/login"},"\u0412\u043e\u0439\u0442\u0438"))})),ie=(a(223),te.a().shape({password:te.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),email:te.b().email("\u0412\u0432\u043e\u0434\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u0435\u043d").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")})),ce=Object(ee.a)((function(e){return{wrapper__registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{textTransform:"uppercase",textAlign:"center",margin:0,marginTop:e.spacing(1),"@media(maxWidth: 1200px)":{fontSize:18}},registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignContent:"center",padding:e.spacing(2),width:350},registration__data:{marginBottom:e.spacing(2)},error__internet:{textAlign:"center",color:"red"}}})),se={authorization:function(e){return function(){var t=Object(b.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(U()),t.prev=1,t.next=4,k(e);case 4:n=t.sent,r=n.data.user.token,O(r),a(y()),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(1),a(C()),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}},le=Object(l.b)((function(e){return{isBlockingForm:H(e)}}),se)((function(e){var t=e.authorization,a=e.isBlockingForm,n=ce(),o=function(){var e=Object(b.a)(f.a.mark((function e(a,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(a,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),void 0===e.t0.response&&e.t0.isAxiosError?n("errorName","\u041d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443"):(n("password","\u041f\u043e\u0447\u0442\u0430 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b"),n("email","\u041f\u043e\u0447\u0442\u0430 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b"));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:n.wrapper__registration},r.a.createElement("h1",{className:n.title},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(Y.c,{initialValues:{email:"",password:""},validationSchema:ie,onSubmit:function(e,t){var a=t.setFieldError;o(e,a)}},(function(e){var t=e.touched,o=e.errors,i=e.handleSubmit,c=e.handleBlur,s=e.handleChange,l=e.values,u=e.isValid,m=e.dirty;return r.a.createElement(Y.b,{className:n.registration,onSubmit:i},r.a.createElement(Y.a,{size:"small",name:"email",className:n.registration__data,as:"input",component:$.a,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",onChange:s("email"),error:t.email&&Boolean(o.email),helperText:t.email&&o.email,onBlur:c("email"),required:!0,value:l.email,disabled:a}),r.a.createElement(Y.a,{size:"small",name:"password",className:n.registration__data,component:$.a,label:"\u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",onChange:s("password"),type:"password",error:t.password&&Boolean(o.password),helperText:t.password&&o.password,onBlur:c("password"),autoComplete:"current-password",fullWidth:!0,required:!0,value:l.password,disabled:a}),r.a.createElement(J.a,{htmlType:"submit",type:"primary",disabled:!u||!m||a},"\u0412\u0445\u043e\u0434"),o.errorName&&r.a.createElement("span",{className:n.error__internet},o.errorName))})),r.a.createElement(c.b,{to:"/blogging-platform/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))})),ue=(a(224),{getUser:D,setLoginSuccess:I}),me=Object(l.b)((function(e){return{isAuth:Z(e)}}),ue)((function(){return r.a.createElement("div",{className:"articles"},"\u0441\u0442\u0430\u0442\u044c\u0438")})),pe=(a(225),{setLoginExit:G}),ge=Object(l.b)((function(e){return{username:X(e)}}),pe)((function(e){var t=e.username,a=e.setLoginExit;return r.a.createElement("div",{className:"wrapper__houme"},r.a.createElement("h1",{className:"title"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),r.a.createElement("span",{className:"name"},t),r.a.createElement(J.a,{className:"houme__btn",onClick:function(){a(),S()}},r.a.createElement(c.b,{to:"/blogging-platform/login"},"\u0412\u044b\u0445\u043e\u0434")))})),de={getUser:D,setLoginSuccess:I},fe=Object(l.b)((function(e){return{isAuth:Z(e)}}),de)((function(e){var t=e.isAuth,a=e.getUser,o=e.setLoginSuccess,i=Object(s.f)();return Object(n.useEffect)((function(){_()?(a(i),o()):i.push("/blogging-platform/signup")}),[t]),r.a.createElement("div",{className:"container"},r.a.createElement(s.a,{path:"/blogging-platform",component:M}),r.a.createElement("div",{className:"wrapper_container"},r.a.createElement("div",{className:"sitebar"},r.a.createElement(s.a,{path:"/blogging-platform/home",component:ge}),r.a.createElement(s.a,{path:"/blogging-platform/login",component:le}),r.a.createElement(s.a,{path:"/blogging-platform/signup",component:oe})),r.a.createElement(s.a,{path:"/blogging-platform",component:me})))})),be=Object(u.e)(P,Object(u.d)(Object(u.a)(m.a))),he=function(){return r.a.createElement(l.a,{store:be},r.a.createElement(c.a,null,r.a.createElement(s.a,{component:fe})))};i.a.render(r.a.createElement(he,null),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.eca267c2.chunk.js.map