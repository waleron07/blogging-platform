(this["webpackJsonpblogging-platform"]=this["webpackJsonpblogging-platform"]||[]).push([[0],{148:function(e,t,a){e.exports=a(224)},175:function(e,t,a){},176:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){"use strict";a.r(t);var n,r,i=a(0),o=a.n(i),s=a(4),c=a.n(s),l=a(23),u=a(7),m=a(20),p=a(37),g=a(130),d=a(141),b=a(16),f=a(257),h=a(50),E=a.n(h),_=a(91),S=a(259),v=a(92),O=a.n(v),j="https://conduit.productionready.io/api/",w=function(e){var t={user:{username:e.username,email:e.email,password:e.password}},a="".concat(j,"users");return O.a.post(a,t)},x=function(e){var t={user:{email:e.email,password:e.password}},a="".concat(j,"users/login");return O.a.post(a,t)},T=function(e){var t={headers:{Authorization:"Token ".concat(e)}},a="".concat(j,"user");return O.a.get(a,t)},N=function(){localStorage.clear()},y=Object(S.a)("STATUS_SIGNUP_REQUEST"),U=Object(S.a)("STATUS_SIGNUP_SUCCESS"),A=Object(S.a)("STATUS_SIGNUP_FAILURE"),C=Object(S.a)("STATUS_LOGIN_REQUEST"),L=Object(S.a)("STATUS_LOGIN_SUCCESS"),I=Object(S.a)("STATUS_LOGIN_FAILURE"),k=Object(S.a)("STATUS_USER_REQUEST"),q=Object(S.a)("STATUS_USER_SUCCESS"),R=Object(S.a)("STATUS_USER_FAILURE"),B=Object(S.a)("LOGIN_DATA"),z=Object(S.a)("LOGIN_EXIT"),F=(Object(S.a)("REQUEST_DATA"),Object(f.a)(Object(b.a)({},B,(function(e,t){return t.payload.user.username})),"")),G=Object(f.a)((n={},Object(b.a)(n,L,(function(){return!0})),Object(b.a)(n,U,(function(){return!0})),Object(b.a)(n,q,(function(){return!0})),Object(b.a)(n,I,(function(){return!1})),Object(b.a)(n,A,(function(){return!1})),Object(b.a)(n,R,(function(){return!1})),Object(b.a)(n,z,(function(){return!1})),n),!1),D=Object(f.a)((r={},Object(b.a)(r,C,(function(){return!0})),Object(b.a)(r,y,(function(){return!0})),Object(b.a)(r,q,(function(){return!1})),Object(b.a)(r,I,(function(){return!1})),Object(b.a)(r,A,(function(){return!1})),Object(b.a)(r,R,(function(){return!1})),r),!1),Q=Object(p.c)({isLogin:G,username:F,isRequest:D}),V=(a(173),a(174),a(175),a(176),a(256)),W=function(e){return e.isLogin},P=function(e){return e.username},J=function(e){return e.isRequest},Z={setLoginExit:z},X=Object(m.b)((function(e){return{isLogin:W(e)}}),Z)((function(e){var t=e.setLoginExit,a=e.history,n=e.isLogin,r=function(){t(),N()};return o.a.createElement("div",{className:"header"},n?o.a.createElement(o.a.Fragment,null,o.a.createElement(V.a,{className:"header__btn",onClick:r},o.a.createElement(l.b,{to:"/blogging-platform/signup"},"\u0412\u044b\u0445\u043e\u0434"))):function(){var e=a.location.pathname,t="/blogging-platform/signup"===e?"/blogging-platform/login":"/blogging-platform/signup",n="/blogging-platform/signup"===e?"\u0412\u0445\u043e\u0434":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f";return o.a.createElement(o.a.Fragment,null,o.a.createElement(V.a,{className:"header__btn"},o.a.createElement(l.b,{to:t},n)))}())})),H=a(26),K=a(255),M=a(252),Y=a(31),$=Y.a().shape({username:Y.b().max(50,"\u0427\u0442\u043e-\u0442\u043e \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0438\u043c\u044f").min(2,"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0438\u043c\u044f").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:Y.b().min(8,"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").max(40,"\u041d\u0443 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043a\u043e\u0440\u043e\u0447\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0435\u0442\u0435?").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").matches(/(?=.*[0-9])(?=.*[A-Z])[a-z0-9A-Z]/,"\u0431\u0443\u043a\u0432\u044b \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u043e\u0433\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0430 \u0438 \u0446\u0438\u0444\u0440\u044b, \u043e\u0442 8 \u0434\u043e 40 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0430 \u0446\u0438\u0444\u0440\u0430 \u0438 \u043e\u0434\u043d\u0430 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0430"),email:Y.b().email("\u0412\u0432\u043e\u0434\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u0435\u043d").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),ee=Object(M.a)((function(e){return{wrapper__registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{textTransform:"uppercase",textAlign:"center",margin:0,marginTop:e.spacing(1),"@media(maxWidth: 1200px)":{fontSize:18}},registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignContent:"center",padding:e.spacing(2),width:350},registration__data:{marginBottom:e.spacing(2)},error__internet:{textAlign:"center",color:"red"}}})),te={registration:function(e,t){return function(){var a=Object(_.a)(E.a.mark((function a(n){var r,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(C()),a.prev=1,a.next=4,w(e);case 4:200===(r=a.sent).status&&(n(L()),i=r.data.user.token,localStorage.setItem("token","".concat(i))),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n(I()),void 0===a.t0.response&&a.t0.isAxiosError?t("errorName","\u041d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443"):(t("username","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"),t("email","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"));case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}},ae=Object(m.b)((function(e){return{isLogin:W(e),isRequest:J(e)}}),te)((function(e){var t=e.registration,a=e.isRequest,n=ee();return o.a.createElement("div",{className:n.wrapper__registration},o.a.createElement("h1",{className:n.title},"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),o.a.createElement(H.c,{initialValues:{username:"",email:"",password:""},validationSchema:$,onSubmit:function(e,a){var n=a.setFieldError;t(e,n)}},(function(e){var t=e.touched,r=e.errors,i=e.handleSubmit,s=e.handleBlur,c=e.handleChange,l=e.values,u=e.dirty,m=e.isValid;return o.a.createElement(H.b,{className:n.registration,onSubmit:i},o.a.createElement(H.a,{size:"small",name:"username",className:n.registration__data,as:"input",component:K.a,label:"\u0418\u043c\u044f",variant:"outlined",onChange:c("username"),error:t.username&&Boolean(r.username),helperText:t.username&&r.username,onBlur:s("username"),required:!0,value:l.username,disabled:a}),o.a.createElement(H.a,{size:"small",name:"email",className:n.registration__data,as:"input",component:K.a,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",onChange:c("email"),error:t.email&&Boolean(r.email),helperText:t.email&&r.email,onBlur:s("email"),required:!0,value:l.email,disabled:a}),o.a.createElement(H.a,{size:"small",name:"password",className:n.registration__data,component:K.a,label:"\u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",onChange:c("password"),type:"password",error:t.password&&Boolean(r.password),helperText:t.password&&r.password,onBlur:s("password"),autoComplete:"current-password",fullWidth:!0,required:!0,value:l.password,disabled:a}),o.a.createElement(V.a,{htmlType:"submit",type:"primary",disabled:!m||!u||a},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.errorName&&o.a.createElement("span",{className:n.error__internet},r.errorName))})),o.a.createElement(l.b,{to:"/blogging-platform/login"},"\u0412\u043e\u0439\u0442\u0438"))})),ne=Y.a().shape({password:Y.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),email:Y.b().email("\u0412\u0432\u043e\u0434\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0430\u0434\u0440\u0435\u0441 \u043d\u0435 \u043a\u043e\u0440\u0435\u043a\u0442\u0435\u043d").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),re=Object(M.a)((function(e){return{wrapper__registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},title:{textTransform:"uppercase",textAlign:"center",margin:0,marginTop:e.spacing(1),"@media(maxWidth: 1200px)":{fontSize:18}},registration:{display:"flex",justifyContent:"center",flexDirection:"column",alignContent:"center",padding:e.spacing(2),width:350},registration__data:{marginBottom:e.spacing(2)},error__internet:{textAlign:"center",color:"red"}}})),ie={authorization:function(e,t){return function(){var a=Object(_.a)(E.a.mark((function a(n){var r,i;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(y()),a.prev=1,a.next=4,x(e);case 4:r=a.sent,n(U()),i=r.data.user.token,localStorage.setItem("token","".concat(i)),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(1),n(A()),void 0===a.t0.response&&a.t0.isAxiosError?t("errorName","\u041d\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443"):(t("password","\u041f\u043e\u0447\u0442\u0430 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b"),t("email","\u041f\u043e\u0447\u0442\u0430 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u043d\u0435\u0432\u0435\u0440\u043d\u044b"));case 14:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()}},oe=Object(m.b)((function(e){return{isLogin:W(e),isRequest:J(e)}}),ie)((function(e){var t=e.authorization,a=e.isRequest,n=re();return o.a.createElement("div",{className:n.wrapper__registration},o.a.createElement("h1",{className:n.title},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),o.a.createElement(H.c,{initialValues:{email:"",password:""},validationSchema:ne,onSubmit:function(e,a){var n=a.setFieldError;t(e,n)}},(function(e){var t=e.touched,r=e.errors,i=e.handleSubmit,s=e.handleBlur,c=e.handleChange,l=e.values,u=e.isValid,m=e.dirty;return o.a.createElement(H.b,{className:n.registration,onSubmit:i},o.a.createElement(H.a,{size:"small",name:"email",className:n.registration__data,as:"input",component:K.a,label:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430",variant:"outlined",onChange:c("email"),error:t.email&&Boolean(r.email),helperText:t.email&&r.email,onBlur:s("email"),required:!0,value:l.email,disabled:a}),o.a.createElement(H.a,{size:"small",name:"password",className:n.registration__data,component:K.a,label:"\u041f\u0430\u0440\u043e\u043b\u044c",variant:"outlined",onChange:c("password"),type:"password",error:t.password&&Boolean(r.password),helperText:t.password&&r.password,onBlur:s("password"),autoComplete:"current-password",fullWidth:!0,required:!0,value:l.password,disabled:a}),o.a.createElement(V.a,{htmlType:"submit",type:"primary",disabled:!u||!m||a},"\u0412\u0445\u043e\u0434"),r.errorName&&o.a.createElement("span",{className:n.error__internet},r.errorName))})),o.a.createElement(l.b,{to:"/blogging-platform/signup"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))})),se=(a(223),{setLoginExit:z}),ce=Object(m.b)((function(e){return{username:P(e)}}),se)((function(e){var t=e.username,a=e.setLoginExit;return o.a.createElement("div",{className:"wrapper__houme"},o.a.createElement("h1",{className:"title"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),o.a.createElement("span",{className:"name"},t),o.a.createElement(V.a,{className:"houme__btn",onClick:function(){a(),N()}},o.a.createElement(l.b,{to:"/blogging-platform/login"},"\u0412\u044b\u0445\u043e\u0434")))})),le={getUser:function(e){return function(){var t=Object(_.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(k()),t.prev=1,t.next=4,T(localStorage.getItem("token"));case 4:n=t.sent,a(q()),a(B(n.data)),e.push("/blogging-platform/houme"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),a(R()),e.push("/blogging-platform/signup");case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},setLoginSuccess:L},ue=Object(m.b)((function(e){return{isLogin:W(e)}}),le)((function(e){var t=e.isLogin,a=e.history,n=e.getUser,r=e.setLoginSuccess;return Object(i.useEffect)((function(){localStorage.getItem("token")?(n(a),r()):a.push("/blogging-platform/signup")}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container"},o.a.createElement(u.a,{path:"/blogging-platform",component:X}),o.a.createElement("div",{className:"sitebar"},o.a.createElement(u.a,{path:"/blogging-platform/houme",component:ce}),o.a.createElement(u.a,{path:"/blogging-platform/login",component:oe}),o.a.createElement(u.a,{path:"/blogging-platform/signup",component:ae}))))})),me=Object(p.e)(Q,Object(p.d)(Object(p.a)(g.a))),pe=Object(d.a)(),ge=function(){return o.a.createElement(m.a,{store:me},o.a.createElement(l.a,null,o.a.createElement(u.a,{component:ue,history:pe})))};c.a.render(o.a.createElement(ge,null),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.08025b2d.chunk.js.map